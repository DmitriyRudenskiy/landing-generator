{% extends "admin.layout.base" %}

{% block title %}Редактировать "Шапку"{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-lg-5 col-md-7">
            <h1>Создать новую "Шапку"</h1>

            <div class="form-group">
                <label>Картинка</label>
                <p>
                    {% if model.bg is not empty %}
                        <img id="upload_image" src="{{ model.path() }}" alt="Загрузить изображение" class="img-thumbnail" style="max-width: 350px; cursor: pointer">
                    {% else %}
                        <img id="upload_image" src="/img/admin/upload_image.jpg" alt="Загрузить изображение" class="img-thumbnail" style="cursor: pointer">
                    {% endif %}
                </p>

                <form action="{{ route('admin_header_bg') }}" method="post" enctype="multipart/form-data" style="display: none">
                    <input type="hidden" name="id" value="{{ model.id }}">
                    <input type="file" name="image" onchange="this.form.submit()">
                </form>

                <p class="help-block">Нажмите на изображение для загрузки картинки</p>
            </div>

            <form method="post" action="{{ route('admin_header_update') }}">
                <input type="hidden" name="id" value="{{ model.id }}">

                <div class="form-group">
                    <label>Заголовок</label>
                    <textarea class="form-control" rows="7" name="title" required>{{ model.title }}</textarea>
                </div>

                <div class="form-group">
                    <label>Подзаголовок</label>
                    <textarea class="form-control" rows="7" name="sub_title" required>{{ model.sub_title }}</textarea>
                </div>

                <div class="form-group">
                    <label>Текст</label>
                    <textarea class="form-control" rows="7" name="description">{{ model.description }}</textarea>
                </div>

                <div class="form-group">
                    <label>Надпись на кнопке</label>
                    <input type="text" name="button" class="form-control" value="{{ model.button }}">
                </div>

                <div class="form-group">
                    <label>Первая картинка</label>
                    <textarea class="form-control" rows="7" name="add_1">{{ model.add_1 }}</textarea>
                </div>

                <div class="form-group">
                    <label>Вторая картинка</label>
                    <textarea class="form-control" rows="7" name="add_2">{{ model.add_2 }}</textarea>
                </div>

                <div class="form-group">
                    <label>Третья картинка</label>
                    <textarea class="form-control" rows="7" name="add_3">{{ model.add_3 }}</textarea>
                </div>

                <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Создать</button>
            </form>
        </div>
    </div>
{% endblock %}


{% block script %}
    <script>
        $(document).ready(function(){
            $('#upload_image').click(function(){
                $('[type="file"]').click();
            });
        });
    </script>

    <script>
        $(document).ready(function(){
            $('[name=title]').keyup(function(){
                if ($(this).val().trim().length > 27) {
                    alert('заглавие(текст), не более 27');
                }
            });

            $('[name=sub_title]').keyup(function(){
                if ($(this).val().trim().length > 72) {
                    alert('под Заглавием текст не более 72 символов');
                }
            });

            $('[name=description]').keyup(function(){
                if ($(this).val().trim().length > 123) {
                    alert('ещё ниже текст не более 123 символов');
                }
            });
        });
    </script>
{% endblock %}