{% extends "admin.layout.base" %}

{% block title %}Редактировать товар{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-lg-5 col-md-7">
            <h1>Редактировать товар</h1>

            <div class="form-group">
                <label>Картинка</label>
                <p>
                    {% if model.photo is not empty %}
                        <img id="upload_image" src="{{ model.path() }}" alt="Загрузить изображение" class="img-thumbnail" style="max-width: 350px; cursor: pointer">
                    {% else %}
                        <img id="upload_image" src="/img/admin/upload_image.jpg" alt="Загрузить изображение" class="img-thumbnail" style="cursor: pointer">
                    {% endif %}
                </p>

                <form action="{{ route('admin_product_photo') }}" method="post" enctype="multipart/form-data" style="display: block">
                    <input type="hidden" name="id" value="{{ model.id }}">
                    <input type="file" name="image" onchange="this.form.submit()">
                </form>

                <p class="help-block">Нажмите на изображение для загрузки картинки</p>
            </div>

            <form method="post" action="{{ route('admin_product_update') }}">
                <input type="hidden" name="id" value="{{ model.id }}">

                <div class="form-group">
                    <label>Приоритет</label>
                    <input type="text" name="priority" value="{{ model.priority }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Комплектация</label>
                    <input type="text" name="equipment" value="{{ model.equipment }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Двигатель</label>
                    <input type="text" name="engine" value="{{ model.engine }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Мощность</label>
                    <input type="text" name="power" value="{{ model.power }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Трансмиссия</label>
                    <input type="text" name="transmission" value="{{ model.transmission }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Привод</label>
                    <input type="text" name="drive_unit" value="{{ model.drive_unit }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Тип кузова</label>
                    <input type="text" name="body_type" value="{{ model.body_type }}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Цвет</label>
                    <input type="text" name="colour" value="{{ model.colour }}" class="form-control" required>
                </div>

                <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Создать</button>
            </form>
        </div>
    </div>
{% endblock %}


{% block script %}
    <script>
        $(document).ready(function(){
            $('#upload_image').click(function(){
                $('[type="file"]').click();
            });
        });
    </script>
{% endblock %}